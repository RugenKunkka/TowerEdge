[gd_scene load_steps=9 format=3 uid="uid://brhmguqgni4y0"]

[ext_resource type="PackedScene" uid="uid://cfdh2gwneol2o" path="res://scenes/buildings/house.tscn" id="1_rjqix"]
[ext_resource type="PackedScene" uid="uid://dtt6jqhuemel3" path="res://AgentsAI/levels/agent_ai.tscn" id="2_leolm"]

[sub_resource type="Environment" id="Environment_leolm"]

[sub_resource type="NavigationMesh" id="NavigationMesh_5pd82"]
vertices = PackedVector3Array(33.127, 0.440915, -55.8309, 32.877, 0.440915, -56.3309, -33.873, 0.440915, -56.3309, -34.373, 0.440915, -55.8309, -34.373, 0.440915, 55.6691, 34.377, 0.440915, 55.6691, 34.377, 0.440915, -55.8309)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(4, 0, 5), PackedInt32Array(0, 6, 5)]

[sub_resource type="PlaneMesh" id="PlaneMesh_4hida"]
size = Vector2(20, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_wmt48"]
size = Vector3(67.6805, 2.58093, 111.637)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_leolm"]

[sub_resource type="CylinderMesh" id="CylinderMesh_rjqix"]

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_leolm")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.224144, -0.5, 0.836516, -0.12941, 0.866025, 0.482963, -0.965926, -2.26673e-07, -0.258819, 38.3339, 10, 15)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.999968, -2.10281e-08, -0.00795858, 0.00540026, 0.734559, 0.678523, 0.00584603, -0.678544, 0.734536, -0.750798, 8.91686, 9.66458)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_5pd82")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(3.4873, 0, 0, 0, 1, 0, 0, 0, 5.62325, 0, 0, 0)
mesh = SubResource("PlaneMesh_4hida")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.466782, -1.26862, -1.01222)
shape = SubResource("BoxShape3D_wmt48")

[node name="Buildings" type="Node3D" parent="."]

[node name="House" parent="Buildings" instance=ExtResource("1_rjqix")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11, 0, 0)

[node name="Agents" type="Node3D" parent="."]

[node name="AgentAI" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.00281, 0, 0)
targetNode = NodePath("../../Target")

[node name="AgentAI2" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.78044, 0, 0)
targetNode = NodePath(".")

[node name="AgentAI3" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9854, 0, -2.78528)
targetNode = NodePath(".")

[node name="AgentAI4" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9854, 0, 2.62466)
targetNode = NodePath(".")

[node name="AgentAI5" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.711216, 0, 5.7619)
targetNode = NodePath(".")

[node name="AgentAI6" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.80977, 0, -5.47278)
targetNode = NodePath(".")
avoidanceFactor = 3.14
maxAvoidanceForce = 2.72
maxSpeed = 4.0

[node name="AgentAI7" parent="Agents" node_paths=PackedStringArray("targetNode") instance=ExtResource("2_leolm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.932716, 0, -13.1239)
targetNode = NodePath(".")
maxAvoidanceForce = 2.72
maxSpeed = 4.0

[node name="Target" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.80418, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CylinderShape3D_leolm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
mesh = SubResource("CylinderMesh_rjqix")
